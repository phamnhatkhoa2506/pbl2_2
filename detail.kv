#:set background_color 1, 1, 1
#:set background_title_color .2, .2, .2
#:set background_button_color .1, .2, .2, .8
#:set font_size_button dp(20)
#:set text_color 0, 0, 0
#:set info_size_hint 1, .3
#:set info_paddingx_label dp(15)
#:set info_paddingx_label_in_box dp(10)
#:set pos_hint_center {"center_x": .5, "center_y": .5}
#:set size_hint_button .9, 1

#:set F_KTWOD_PATH "assets/fonts/K2D-"
#:set F_KANIT_PATH "assets/fonts/Kanit-"
#:set F_ROBOTO_PATH "assets/fonts/Roboto-"
#:set I_ICON_PATH 'assets/images/icon/'
#:set I_BG_PATH 'assets/images/background/'

<InforLabel@Label>:
    color: text_color
    halign: 'left'
    valign: 'center'
    padding_x: info_paddingx_label_in_box

<BookingButton@Button>:
    size_hint: size_hint_button
    pos_hint: pos_hint_center
    font_name: F_ROBOTO_PATH + 'BoldItalic.ttf'
    font_size: font_size_button
    background_color: background_button_color

<DetailWindow>:
    name: "detail"
    BoxLayout:
        id: all_detail_page
        orientation: 'vertical'
        canvas:
            Color:
                rgb: background_title_color
            Rectangle:
                size: self.size
        MDBoxLayout:
            size_hint: 1, .2
            orientation: 'horizontal' 
            ImageButton:
                source: I_ICON_PATH +'icon.png'
                color: 1.5, 1.5, 1.5, 1
                size_hint: .2, 1
            Label:
                text: "Ghibli"
                font_name: F_KTWOD_PATH + "Bold.ttf"
                font_size: dp(80)
                size_hint: .2, 1
            Label:
                text: root.ids.movie_detail.name_vn
                size_hint: .8, 1
                font_name: F_KANIT_PATH + "Bold.ttf"
                font_size: dp(30)
                color: .8, .8, 0.8
            BoxLayout:
                size_hint: .2, 1
                Button:
                    text: "Quay lại"
                    size_hint: None, .3
                    pos_hint: pos_hint_center
                    font_name: F_ROBOTO_PATH + "BoldItalic.ttf"
                    on_release:
                        app.root.current = "movies_showing"
                        root.manager.transition.direction = "down"
        RelativeLayout: 
            canvas.before:
                Color:
                    rgb: background_color
                Rectangle:
                    size: self.size
            ScrollView:
                MovieDetail:
                    id: movie_detail
                    size_hint: 1, None
                    orientation: 'vertical'
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint: 1, None
                        height: dp(570)
                        RelativeLayout:
                            ImageButton:
                                source: root.ids.movie_detail.image
                                color: 1.1, 1.1, 1.1, 1
                                size_hint: 1, None
                                height: dp(550)
                                keep_ratio: True
                                allow_stretch: True
                                pos_hint: {'center_x': .5, 'center_y': .5}
                        BoxLayout:
                            orientation: "vertical"
                            size_hint: 2, 1
                            Label:
                                text: root.ids.movie_detail.name_vn
                                size_hint: info_size_hint
                                color: text_color
                                font_name: F_KTWOD_PATH + 'Medium.ttf'
                                halign: 'left'
                                valign: 'middle'
                                text_size: self.size
                                font_size: dp(30)
                                padding_x: info_paddingx_label
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'filmstrip'
                                InforLabel:
                                    text: root.ids.movie_detail.type_vn
                                    text_size: self.size
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'clock'
                                InforLabel:
                                    text: root.ids.movie_detail.time + " phút"
                                    text_size: self.size
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'earth'
                                InforLabel:
                                    text: root.ids.movie_detail.country_vn
                                    text_size: self.size
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'comment-text'
                                InforLabel:
                                    text: root.ids.movie_detail.language_vn
                                    text_size: self.size
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'account-check'
                                InforLabel:
                                    text: "Khán giả từ " + root.ids.movie_detail.limitage_vn + " tuổi trở lên "
                                    text_size: self.size
                            InforLabel:
                                size_hint: info_size_hint
                                text: "Mô tả"
                                text_size: self.size
                                font_name: F_KTWOD_PATH + 'Medium.ttf'
                                font_size: dp(22)
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'star'
                                Label: 
                                    text: "Diễn viên: "
                                    size_hint: .1, 1
                                    color: text_color
                                Label:
                                    text: root.ids.movie_detail.actor
                                    color: text_color
                                    halign: 'left'
                                    valign: 'center'
                                    text_size: self.size
                                    padding_x: info_paddingx_label_in_box
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint: info_size_hint
                                MDIconButton:
                                    icon: 'movie-open'
                                Label: 
                                    text: "Đạo diễn: "
                                    size_hint: .1, 1
                                    color: text_color
                                Label:
                                    text: root.ids.movie_detail.director
                                    color: text_color
                                    halign: 'left'
                                    valign: 'center'
                                    text_size: self.size
                                    padding_x: info_paddingx_label_in_box
                            InforLabel:
                                size_hint: 1, .2
                                text: "Nội dung phim"
                                text_size: self.size
                                font_name: F_KTWOD_PATH + 'Medium.ttf'
                                font_size: dp(22)
                            InforLabel:
                                text: root.ids.movie_detail.brief_vn
                                text_size: self.size
                                font_name: F_KTWOD_PATH + 'Light.ttf'
                                font_size: dp(18)
                    BoxLayout:
                        size_hint: 1, None
                        height: dp(50)
                        orientation: "horizontal"
                        RelativeLayout:
                            BookingButton:
                                text: "Chọn ngày chiếu"
                                on_press: root.ids.movie_detail.justify_area(root.ids.date_area, 200)
                        RelativeLayout:
                            BookingButton:
                                text: "Chọn giờ chiếu"
                                on_press: root.ids.movie_detail.justify_area(root.ids.time_area, 200)
                        RelativeLayout:
                            BookingButton:
                                text: "Chọn vé"
                                on_press: root.ids.movie_detail.justify_area(root.ids.ticket_area, 200)
                        RelativeLayout:
                            BookingButton:
                                text: 'Chọn ghế'
                                on_press: root.ids.movie_detail.justify_area(root.ids.seat_area, 400)
                    DateArea:
                        id: date_area
                        size_hint_y: None
                        height: dp(200)
                        opacity: 1
                        disabled: False
                    TimeArea:
                        id: time_area
                        size_hint_y: None
                        height: dp(0)
                        opacity: 0
                        disabled: True
                    TicketArea:
                        id: ticket_area
                        size_hint_y: None
                        height: dp(0)
                        opacity: 0
                        disabled: True
                    SeatArea:
                        id: seat_area
                        size_hint_y: None
                        height: dp(0)
                        opacity: 0
                        disabled: True
                    Label:
                        id: note
                        size_hint_y: None
                        height: dp(50)
                        text: "Hãy chọn thông tin đặt vé"
                        color: 0, 0, 0, 1
                        font_size: dp(20)
                    TotalArea:
                        id: total_area
                        orientation: 'horizontal'
                        canvas.before:
                            Color: 
                                rgba: .6, .6, .6, 1
                            Rectangle:
                                size: self.size
                                pos: self.pos
                        size_hint_y: None
                        height: dp(150)
                        Label:
                            text: root.ids.date_area.selected_date_label + root.ids.time_area.selected_time_label + root.ids.ticket_area.selected_tickets_label + root.ids.seat_area.selected_seats_label
                            color: .1, .1, .1, 1
                            halign: 'center'
                            valign: 'center'
                            font_size: dp(20)
                            font_name: F_KANIT_PATH + "Bold.ttf"
                        BoxLayout:
                            orientation: 'vertical'
                            RelativeLayout:
                                Label:
                                    id: booking_infor
                                    text: 'Tổng cộng: ' + root.ids.ticket_area.total_cost_label
                                    font_size: dp(20)
                                    font_name: F_KANIT_PATH + "Bold.ttf"
                                    color: .1, .1, .1, 1
                            RelativeLayout:
                                Button:
                                    id: booking
                                    text: 'Đặt vé'
                                    size_hint_x: .3
                                    pos_hint: {'center_x': .5}
                                    font_size: dp(20)
                                    font_name: F_KANIT_PATH + "Bold.ttf"
                                    background_color: .5, .7, .1, 1
                                    on_press: root.booking()
                                    